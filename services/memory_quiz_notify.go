package services // ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® Package services

import (
	"fmt" // ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ package ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (Sprintf)
)

// NotifyQuizSuccess: ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á PWA ‡πÅ‡∏•‡∏∞ Discord ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏ü‡∏ô‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ñ‡∏π‡∏Å
// ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤: PartnerID (‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏´‡∏≤), Question (‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö), WrongCount (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î)
func NotifyQuizSuccess(partnerID string, question string, wrongCount int) {
	// 1. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Push Notification
	title := "üíñ ‡πÅ‡∏ü‡∏ô‡∏ó‡∏≤‡∏¢‡πÉ‡∏à‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å!"
	// ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞‡∏ú‡∏¥‡∏î‡πÑ‡∏õ‡∏Å‡∏µ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á
	body := fmt.Sprintf("‡πÅ‡∏ü‡∏ô‡∏à‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ: %s\n(‡∏ú‡∏¥‡∏î‡πÑ‡∏õ %d ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ñ‡∏π‡∏Å)", question, wrongCount)

	// 2. ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á Push Notification (PWA) ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÅ‡∏ü‡∏ô
	TriggerPushNotification(partnerID, title, body)

	// 3. ‡∏™‡πà‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ Discord (‡πÉ‡∏ä‡πâ Go Routine ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏á ‡πÑ‡∏°‡πà‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å)
	go func() {
		// ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Discord (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Markdown **‡∏ï‡∏±‡∏ß‡∏´‡∏ô‡∏≤**)
		discordMsg := fmt.Sprintf("‚ú® **%s**\nüí≠ **‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°:** %s\n‚ùå **‡∏ï‡∏≠‡∏ö‡∏ú‡∏¥‡∏î‡πÑ‡∏õ:** %d ‡∏Ñ‡∏£‡∏±‡πâ‡∏á", title, question, wrongCount)

		// ‡∏™‡πà‡∏á Discord Embed ‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π (16738740)
		SendDiscordEmbed("Memory Quiz Success! ‚ù§Ô∏è", discordMsg, 16738740, nil, "")
	}()
}
